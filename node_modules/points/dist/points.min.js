!function(r,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(r.Points=r.Points||{})}(this,function(r){"use strict";var t=Object.assign||function(r){for(var t=1;t<arguments.length;t++){var e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}return r},e=function(){function r(r,t){var e=[],n=!0,u=!1,c=void 0;try{for(var a,o=r[Symbol.iterator]();!(n=(a=o.next()).done)&&(e.push(a.value),!t||e.length!==t);n=!0);}catch(r){u=!0,c=r}finally{try{!n&&o.return&&o.return()}finally{if(u)throw c}}return e}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return r(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n=function(r){if(Array.isArray(r)){for(var t=0,e=Array(r.length);t<r.length;t++)e[t]=r[t];return e}return Array.from(r)},u=2*Math.PI,c=function(r,t,e,n,u,c,a){var o=r.x,i=r.y;o*=t,i*=e;var y=n*o-u*i,v=u*o+n*i;return{x:y+c,y:v+a}},a=function(r,t){var e=4/3*Math.tan(t/4),n=Math.cos(r),u=Math.sin(r),c=Math.cos(r+t),a=Math.sin(r+t);return[{x:n-u*e,y:u+n*e},{x:c+a*e,y:a-c*e},{x:c,y:a}]},o=function(r,t,e,n){var u=r*n-t*e<0?-1:1,c=Math.sqrt(r*r+t*t),a=Math.sqrt(r*r+t*t),o=r*e+t*n,i=o/(c*a);return i>1&&(i=1),i<-1&&(i=-1),u*Math.acos(i)},i=function(r,t,e,n,c,a,i,y,v,x,f,p){var s=Math.pow(c,2),h=Math.pow(a,2),l=Math.pow(f,2),g=Math.pow(p,2),d=s*h-s*g-h*l;d<0&&(d=0),d/=s*g+h*l,d=Math.sqrt(d)*(i===y?-1:1);var m=d*c/a*p,M=d*-a/c*f,b=x*m-v*M+(r+e)/2,w=v*m+x*M+(t+n)/2,A=(f-m)/c,I=(p-M)/a,q=(-f-m)/c,P=(-p-M)/a,T=o(1,0,A,I),L=o(A,I,q,P);return 0===y&&L>0&&(L-=u),1===y&&L<0&&(L+=u),[b,w,T,L]},y=function(r){var t=r.px,n=r.py,o=r.cx,y=r.cy,v=r.rx,x=r.ry,f=r.xAxisRotation,p=void 0===f?0:f,s=r.largeArcFlag,h=void 0===s?0:s,l=r.sweepFlag,g=void 0===l?0:l,d=[];if(0===v||0===x)return[];var m=Math.sin(p*u/360),M=Math.cos(p*u/360),b=M*(t-o)/2+m*(n-y)/2,w=-m*(t-o)/2+M*(n-y)/2;if(0===b&&0===w)return[];v=Math.abs(v),x=Math.abs(x);var A=Math.pow(b,2)/Math.pow(v,2)+Math.pow(w,2)/Math.pow(x,2);A>1&&(v*=Math.sqrt(A),x*=Math.sqrt(A));var I=i(t,n,o,y,v,x,h,g,m,M,b,w),q=e(I,4),P=q[0],T=q[1],L=q[2],F=q[3],O=Math.max(Math.ceil(Math.abs(F)/(u/4)),1);F/=O;for(var j=0;j<O;j++)d.push(a(L,F)),L+=F;return d.map(function(r){var t=c(r[0],v,x,M,m,P,T),e=t.x,n=t.y,u=c(r[1],v,x,M,m,P,T),a=u.x,o=u.y,i=c(r[2],v,x,M,m,P,T),y=i.x,f=i.y;return{x1:e,y1:n,x2:a,y2:o,x:y,y:f}})},v=function(r,t,e){var n=Math.acos((Math.pow(r,2)+Math.pow(t,2)-Math.pow(e,2))/(2*r*t));return n*(180/Math.PI)},x=function(r,t){for(var e=arguments.length,n=Array(e>2?e-2:0),u=2;u<e;u++)n[u-2]=arguments[u];return p(t)?t.map(function(t){return r.apply(void 0,[t].concat(n))}):r.apply(void 0,[t].concat(n))},f=function(r){return p(r)?r:[r]},p=function(r){return Array.isArray(r[0])},s=function(r,t,e){var n=r===t?0:Math.abs(t-r);return 0===n?r:r<t?r+n*e:r-n*e},h=function(r){for(var t=[],e=0,n=r.length;e<n;e++){var u=r[e];if(u.curve&&"cubic"!==u.curve.type){var c=r[e-1],a=c.x,o=c.y,i=u.x,v=u.y;if("arc"===u.curve.type){var x=y({px:a,py:o,cx:i,cy:v,rx:u.curve.rx,ry:u.curve.ry,xAxisRotation:u.curve.xAxisRotation,largeArcFlag:u.curve.largeArcFlag,sweepFlag:u.curve.sweepFlag});x.forEach(function(r){var e=r.x1,n=r.y1,u=r.x2,c=r.y2,a=r.x,o=r.y;t.push({x:a,y:o,curve:{type:"cubic",x1:e,y1:n,x2:u,y2:c}})})}else if("quadratic"===u.curve.type){var f=a+2/3*(u.curve.x1-a),p=o+2/3*(u.curve.y1-o),s=i+2/3*(u.curve.x1-i),h=v+2/3*(u.curve.y1-v);t.push({x:i,y:v,curve:{type:"cubic",x1:f,y1:p,x2:s,y2:h}})}}else t.push(u)}return t},l=function(r){return x(h,r)},g=function(r,t){return[{x:s(r.x,t.x,.5),y:s(r.y,t.y,.5)},t]},d=function(r,t){var e=t.curve,n=e.x1,u=e.y1,c=e.x2,a=e.y2,o={x:r.x,y:r.y},i={x:n,y:u},y={x:c,y:a},v={x:t.x,y:t.y},x={x:s(o.x,i.x,.5),y:s(o.y,i.y,.5)},f={x:s(i.x,y.x,.5),y:s(i.y,y.y,.5)},p={x:s(y.x,v.x,.5),y:s(y.y,v.y,.5)},h={x:s(x.x,f.x,.5),y:s(x.y,f.y,.5)},l={x:s(f.x,p.x,.5),y:s(f.y,p.y,.5)},g={x:s(h.x,l.x,.5),y:s(h.y,l.y,.5)};return[{x:g.x,y:g.y,curve:{type:"cubic",x1:x.x,y1:x.y,x2:h.x,y2:h.y}},{x:v.x,y:v.y,curve:{type:"cubic",x1:l.x,y1:l.y,x2:p.x,y2:p.y}}]},m=function(r,t){return t.curve?d(r,t):g(r,t)},M=function r(t,u){if(isNaN(u))throw Error("`add` function must be passed a number as the second argument");for(var c=[].concat(n(t)),a=1;a<c.length;){if(c.length>=u)return c;var o=c[a];if(o.moveTo)a++;else{var i=c[a-1],y=m(i,o),v=e(y,2),x=v[0],f=v[1];c.splice(a,1,x,f),a+=2}}return r(c,u)},b=function(r,t){return M(l(r),t)},w=function(r,t){var e=P(r,t);return e.reduce(function(r,t,n){var u=t.x,c=t.y,a=t.moveTo;if(!a){var o=e[n-1],i=o.x,y=o.y;r+=A(i,y,u,c)}return r},0)},A=function(r,t,e,n){return Math.sqrt(Math.pow(r-e,2)+Math.pow(t-n,2))},I=function(r){var t=e(r[0],2),n=t[0],u=t[1],c=e(r[1],2),a=c[0],o=c[1],i=e(r[2],2),y=i[0],x=i[1],f=A(n,u,a,o),p=A(a,o,y,x),s=A(y,x,n,u);return v(f,p,s)},q=function(r){return r.reduce(function(r,t){var e=t.curve;return!!e||r},!1)},P=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!q(r))return r;var e=l(r),n=[];return e.map(function(r,u){if(r.curve){var c=e[u-1];L(c,r,t).map(function(r){return n.push(r)})}else n.push(r)}),n},T=function(r,t,e,n,u,c,a,o,i){var y=[[e,n],[u,c],[r,t]],v=[[a,o],[r,t],[u,c]];return I(y)<i&&I(v)<i},L=function r(t,u,c){var a=t.x,o=t.y,i=u.x,y=u.y,v=u.curve,x=v.x1,f=v.y1,p=v.x2,s=v.y2;if(T(a,o,x,f,i,y,p,s,c))return[u];var h=d(t,u),l=e(h,2),g=l[0],m=l[1];return[].concat(n(r(t,g,c)),n(r(g,m,c)))},F=function(r){var t=void 0,e=void 0,n=void 0,u=void 0,c=f(r);return c.map(function(r){return P(r).map(function(r){var c=r.x,a=r.y;("number"!=typeof t||a>t)&&(t=a),("number"!=typeof e||c<e)&&(e=c),("number"!=typeof n||c>n)&&(n=c),("number"!=typeof u||a<u)&&(u=a)})}),{bottom:t,center:{x:e+(n-e)/2,y:u+(t-u)/2},left:e,right:n,top:u}},O=function(r){return r.reduce(function(r,t){return r+j(t)},0)},j=function(r){return r.length-(R(r)?1:0)},R=function(r){var t=r[0],e=r[r.length-1];return t.x===e.x&&t.y===e.y},E=function(r){return r.reduce(function(r,t){return[].concat(n(r),n(t))},[])},N=function(r,t){var e=B(r),u=O(e),c=(t%u+u)%u;if(!c)return r;var a=k(e,c),o=a.lineIndex,i=a.pointIndex,y=S(e,o),v=_(y[0],i),x=[].concat(n(y)).splice(1);return E([v].concat(n(x)))},k=function(r,t){for(var e=0,n=r.length;e<n;e++){var u=j(r[e]);if(t<=u-1)return{lineIndex:e,pointIndex:t};t-=u}},S=function(r,t){return[].concat(n(r)).splice(t).concat([].concat(n(r)).splice(0,t))},_=function(r,t){if(!t)return r;var e=[{x:r[t].x,y:r[t].y,moveTo:!0}].concat(n([].concat(n(r)).splice(t+1)));return R(r)?[].concat(n(e),n([].concat(n(r)).splice(1,t))):[].concat(n(e),n([].concat(n(r)).splice(0,t+1)))},B=function(r){return r.reduce(function(r,t){return t.moveTo&&r.push([]),r[r.length-1].push(t),r},[])},z=function(r,e,n){return r.map(function(r){var u=t({},r);return u.x+=e,u.y+=n,u.curve&&(u.curve=t({},u.curve),"quadratic"!==u.curve.type&&"cubic"!==u.curve.type||(u.curve.x1+=e,u.curve.y1+=n),"cubic"===u.curve.type&&(u.curve.x2+=e,u.curve.y2+=n)),u})},C=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return x(z,r,t,e)},D=function(r,t,e,n,u){if(r===e)return t>=n?0:180;var c=100,a=A(e,n,r,t-c),o=v(u,c,a);return r<e?o:360-o},G=function(r,t,e,n){var u=r[t-2],c=u.x,a=u.y,o=r[t-1],i=o.x,y=o.y,v=A(c,a,i,y),x=(n-e)/v+1;return{x1:c,y1:a,x2:i,y2:y,segmentInterval:x,segmentLength:v}},H=function(r,t,e){var n=P(r,e),u=n.length,c=w(n),a=c*t,o=t>1?G(n,u,c,a):t<0?J(n,a):K(n,u,a),i=o.x1,y=o.y1,v=o.x2,x=o.y2,f=o.segmentInterval,p=o.segmentLength;return{angle:D(i,y,v,x,p),x:s(i,v,f),y:s(y,x,f)}},J=function(r,t){var e=r[0],n=e.x,u=e.y,c=r[1],a=c.x,o=c.y,i=A(n,u,a,o),y=t/i;return{x1:n,y1:u,x2:a,y2:o,segmentInterval:y,segmentLength:i}},K=function(r,t,e){for(var n=0,u=0;u<t;u++){var c=r[u].moveTo;if(!c){var a=r[u-1],o=a.x,i=a.y,y=r[u],v=y.x,x=y.y,f=A(o,i,v,x);if(n+f>=e){var p=(e-n)/f;return{x1:o,y1:i,x2:v,y2:x,segmentInterval:p,segmentLength:f}}n+=f}}},Q=function(r,t,e){if(t.curve||e.curve)return!1;var n=(e.y-r.y)*(t.x-r.x)-(e.x-r.x)*(t.y-r.y);if(Math.abs(n)>Number.EPSILON)return!1;var u=(e.x-r.x)*(t.x-r.x)+(e.y-r.y)*(t.y-r.y);if(u<0)return!1;var c=(t.x-r.x)*(t.x-r.x)+(t.y-r.y)*(t.y-r.y);return!(u>c)},U=function(r){for(var t=[],e=0,n=r.length;e<n;e++){var u=t[t.length-1],c=r[e+1],a=r[e];u&&c&&a&&Q(u,c,a)||t.push(a)}return t},V=function(r){return x(U,r)},W=function(r){var t=void 0,e=void 0;return r.reverse().map(function(r,n){var u=r.x,c=r.y,a=r.moveTo,o=r.curve,i={x:u,y:c};if(e){var y=e,v=y.x1,x=y.y1,f=y.x2,p=y.y2;i.curve={type:"cubic",x1:f,y1:p,x2:v,y2:x}}return(0===n||t)&&(i.moveTo=!0),t=a,e=o||null,i})},X=function(r){return x(W,l(r))},Y=function(r,t,e,n,u){var c=u.x,a=u.y,o=r-c,i=t-a;return[o*e-i*n+c,o*n+i*e+a]},Z=function(r,n,u){return r.map(function(r){var c=n*Math.PI/180,a=Math.cos(c),o=Math.sin(c),i=Y(r.x,r.y,a,o,u),y=e(i,2),v=y[0],x=y[1],f=t({},r,{x:v,y:x});if(f.curve){if("quadratic"===f.curve.type||"cubic"===f.curve.type){var p=Y(f.curve.x1,f.curve.y1,a,o,u),s=e(p,2),h=s[0],l=s[1];f.curve=t({},f.curve,{x1:h,y1:l})}if("cubic"===f.curve.type){var g=Y(f.curve.x2,f.curve.y2,a,o,u),d=e(g,2),m=d[0],M=d[1];f.curve=t({},f.curve,{x2:m,y2:M})}}return f})},$=function(r,t){var e=F(r),n=e.center;return x(Z,r,t,n)},rr=function(r,e,n,u){var c=t({},r);return c.x=n-(n-c.x)*e,c.y=u-(u-c.y)*e,r.curve&&(c.curve=t({},c.curve),"arc"===c.curve.type?(c.curve.rx&&(c.curve.rx=c.curve.rx*e),c.curve.ry&&(c.curve.ry=c.curve.ry*e)):(c.curve.x1=n-(n-c.curve.x1)*e,c.curve.y1=u-(u-c.curve.y1)*e,"cubic"===c.curve.type&&(c.curve.x2=n-(n-c.curve.x2)*e,c.curve.y2=u-(u-c.curve.y2)*e))),c},tr=function(r,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"center",n=F(r),u=n.bottom,c=n.center,a=n.left,o=n.right,i=n.top,y=c.x,v=c.y;switch(e){case"topLeft":y=a,v=i;break;case"topRight":y=o,v=i;break;case"bottomRight":y=o,v=u;break;case"bottomLeft":y=a,v=u}return x(function(r){return r.map(function(r){return rr(r,t,y,v)})},r)};r.add=b,r.boundingBox=F,r.cubify=l,r.length=w,r.moveIndex=N,r.offset=C,r.position=H,r.remove=V,r.reverse=X,r.rotate=$,r.scale=tr,Object.defineProperty(r,"__esModule",{value:!0})});
//# sourceMappingURL=points.min.js.map
